<!DOCTYPE html>
<!-- 避免非服务器环境运行（双击index）打开产生的跨域问题，所有内容将保存在同一页面上 -->
<html>
	<head>
		<meta charset="utf-8">
		<title>OMEGA交互测试demo</title>
		<link rel="stylesheet" href="css/index.css">
	</head>
	<body>
		<div id="main">
			<div id="list">
				<div class="list-ico" onclick="commandSwitch()">
					<img src="img/Application.png" class="list-ico-img">
					<span class="list-ico-span">命令执行</span>
				</div>
				<div class="list-ico" onclick="worldSwitch()">
					<img src="img/Shape.png" class="list-ico-img">
					<span class="list-ico-span">世界控制</span>
				</div>
				<div class="list-ico" onclick="playerSwitch()">
					<img src="img/Group.png" class="list-ico-img">
					<span class="list-ico-span">玩家控制</span>
				</div>
				<div class="list-ico" onclick="inputSwitch()">
					<img src="img/Download.png" class="list-ico-img">
					<span class="list-ico-span">建筑导入 </span>
				</div>
				<div class="list-ico" onclick="jsonsetSwitch()">
					<img src="img/Data-Edit.png" class="list-ico-img">
					<span class="list-ico-span">配置编辑</span>
				</div>
				<div class="list-ico" onclick="inquireSwitch()">
					<img src="img/Data-Find.png" class="list-ico-img">
					<span class="list-ico-span">数据查询</span>
				</div>
			</div>
			<div id="omg-link">
				<h3>&nbsp;&nbsp;&nbsp;omg服务连接状态：
					<span class="omgLink">
						<span style="color: red;">您的浏览器不支持websocket!不推荐使用ie内核浏览器</span>
					</span>
					<div id="socker-div">
						<span>连接地址：</span>
						<input type="text" id="socket" value="127.0.0.1:24011">
						<!-- <span>:</span><input type="text" id="socket2"> -->
						<input type="button" value="保存" onclick="socketClose()">
					</div>
				</h3>
			</div>

			<!-- 主页 -->
			<div class="show" id="list-mian">
				<div class="show-main">
					<H1>hello Omega~</H1>
					<h3>点击左侧功能区开始使用</h3>
					<br />
					<p>该工具依赖Omega旁加载系统运行</p>
					<p>该工具仅支持大屏设备，完善后考虑手机</p>
					<p>显示【服务断开连接】表示本机无运行旁加载组件的Omega，请检查连接地址或重启Omega</p>
					<p>显示【您的浏览器不支持websocket!】请尝试更换浏览器（不支持IE）</p>
					<br />
					<br />
					<h5>
						<br>说明：这是一个基于websocket的OMEGA工具
						<br>概念阶段，持续更新中。当前版本：2022.7.31 v1
						<br>
						<br>
						<br>已知bug：链接地址填奇怪的东西会卡死。请刷新界面
						<br>小声bb：手机版？等功能基本定型后再适配。想起来就写两行
						<br>源代码：
					</h5>
				</div>
			</div>

			<!-- 命令执行 -->
			<div class="show" id="list-command">
				<div class="show-main">
					<table>
						<tr>
							<td class="text">以后台身份执行命令：</td>
							<td><input class="shellInput" id="command-msg-Websocket" type="text" placeholder="命令如：/say hi" />
							</td>
							<td><button class="shellButton" onclick="msgWebsocket()">提交</button></td>
						</tr>
						<tr>
							<td class="text">以机器人身份执行命令：</td>
							<td><input class="shellInput" id="command-msg-Player" type="text" placeholder="命令如：/say hi" /></td>
							<td><button class="shellButton" onclick="msgPlayer()">提交</button></td>
						</tr>
						<tr>
							<td class="text">执行FastBuilder控制台命令：</td>
							<td><input class="shellInput" id="command-cmd-json" type="text" placeholder="命令内容" /></td>
							<td><button class="shellButton" onclick="msgCmd()">提交</button></td>
						</tr>
						<tr>
							<td class="text">机器人群聊消息(群服互通)：</td>
							<td><input class="shellInput" id="command-qq-json" type="text" placeholder="消息" /></td>
							<td><button class="shellButton" onclick="msgQq()">提交</button></td>
						</tr>
						<tr>
							<td class="text">发送json(omg)请求：</td>
							<td><input class="shellInput" id="command-msg-json" type="text" placeholder="json内容" /></td>
							<td><button class="shellButton" onclick="msgShell()">提交</button></td>
						</tr>
						<tr>
							<td class="text">执行Omega函数：</td>
							<td>
								<input class="shellInput" type="text" id="command-function" placeholder="函数：必填" style="width: 80px;"/>
								<input class="shellInput" type="text" id="command-args" placeholder="数据类型:可选" style="width: 80px;"/>
								<input class="shellInput" type="text" id="command-value" placeholder="数据值：可选" style="width: 80px;"/>
							</td>
							<td><button class="shellButton" onclick="msgFunction()">提交</button></td>
						</tr>
					</table>
				</div>
			</div>

			<!-- 世界控制 -->
			<div class="show" id="list-world">
				<div class="show-main">
					<table>
						<tr id="world-settime">
							<td><span>设定游戏时间：</span></td>
							<td>
								<input onchange="numValueGain()" value="0" type="range" min="0" max="18000" step=""
									id="timeRange" />
								<span id="timeRangeValue">0</span>
								<input id="world-settime-input" type="button" value="执行" onclick="msgTimeSet()">
							</td>
						</tr>
						<tr>
							<td><span>天气控制：</span></td>
							<td>
								<input class="shellButton" type="button" value="晴天" onclick="weatherClear()">
								<input class="shellButton" type="button" value="雨天" onclick="weatherRain()">
								<input class="shellButton" type="button" value="雷雨天" onclick="weatherThunder()">
							</td>
						</tr>
						<tr>
							<td><span>清理掉落物：</span></td>
							<td>
								<input class="shellButton" type="button" value="清理掉落物" onclick="killItems()">
							</td>
						</tr>
					</table>
				</div>
			</div>

			<!-- 玩家控制 -->
			<div class="show" id="list-player">
				<div class="show-main">
					<span>刷新玩家列表：</span>
					<input type="button" value="刷新" onclick="playerList()">
					<table border="" cellspacing="" cellpadding="">
						<tr>
							<th>玩家名</th>
							<th>玩家坐标</th>
						</tr>
						<tr>
							<td>Data</td>
						</tr>
					</table>
					
					<input type="button" value="调试模式" onclick="testtest()">
					<script>
						function testtest() {
							document.getElementById("player-list").innerHTML = "";
							var obj = ["玩家1", "玩家2"];
							for (var i = 0; i < obj.length; i++) {
								document.getElementById("player-list").innerHTML +=
									`这里放玩家列表。分配临时id<br>`;
							}
						};
					</script>
					<div id="player-list">

					</div>
				</div>
			</div>

			<!-- 建筑导入 -->
			<div class="show" id="list-input">
				<div class="show-main">
					<span>还没找到方便的接口</span>
					<p>，计划做一个引导工具</p>
				</div>
			</div>

			<!-- 配置编辑 -->
			<div class="show" id="list-jsonset">
				<div class="show-main">
					<span>先把界面画好在做这个</span>
				</div>
			</div>

			<!-- 数据查询 -->
			<div class="show" id="list-slelect">
				<div class="show-main">
					<p>正在找高性能解析方案</p>
					<span>由于浏览器安全策略限制，解决不了这里将是一个json上传分析工具</span>
				</div>
			</div>

			<!-- 返回消息 -->
			<div id="omg-msgDiv">
				<span>&nbsp;&nbsp;返回消息：</span>
			</div>

		</div>
	</body>
	<script src="js/WebSocket.js"></script>
	<script src="js/shell.js"></script>
</html>
